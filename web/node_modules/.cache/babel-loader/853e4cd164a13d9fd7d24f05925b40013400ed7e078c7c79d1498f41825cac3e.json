{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PCUSER\\\\VScode-project\\\\CHAP\\\\web\\\\src\\\\components\\\\Layout.tsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { useSelector } from 'react-redux';\nimport { Box, AppBar, Toolbar, Typography, BottomNavigation, BottomNavigationAction } from '@mui/material';\nimport { Home, Add, Notifications, Person, Map } from '@mui/icons-material';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Layout = ({\n  children\n}) => {\n  _s();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const {\n    isAuthenticated\n  } = useSelector(state => state.auth);\n  const {\n    unreadCount\n  } = useSelector(state => state.notifications);\n\n  // 認証が必要なページのリスト\n  const authRequiredPages = ['/', '/post', '/notifications', '/profile', '/chat', '/create-room', '/settings', '/map'];\n  const isAuthRequired = authRequiredPages.includes(location.pathname);\n\n  // ログインページや管理者ページは認証チェックをスキップ\n  const noAuthPages = ['/login', '/onboarding', '/admin'];\n  const isNoAuthPage = noAuthPages.some(page => location.pathname.startsWith(page));\n\n  // 認証が必要なページで未認証の場合はログインページにリダイレクト\n  if (isAuthRequired && !isAuthenticated && !isNoAuthPage) {\n    React.useEffect(() => {\n      navigate('/login');\n    }, [navigate]);\n    return null;\n  }\n  const handleNavigation = (event, newValue) => {\n    navigate(newValue);\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      display: 'flex',\n      flexDirection: 'column',\n      minHeight: '100vh'\n    },\n    children: [/*#__PURE__*/_jsxDEV(AppBar, {\n      position: \"static\",\n      children: /*#__PURE__*/_jsxDEV(Toolbar, {\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          component: \"div\",\n          sx: {\n            flexGrow: 1\n          },\n          children: \"CHAP\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      component: \"main\",\n      sx: {\n        flexGrow: 1,\n        pb: 7\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), isAuthenticated && /*#__PURE__*/_jsxDEV(BottomNavigation, {\n      value: location.pathname,\n      onChange: handleNavigation,\n      sx: {\n        position: 'fixed',\n        bottom: 0,\n        left: 0,\n        right: 0,\n        zIndex: 1000\n      },\n      children: [/*#__PURE__*/_jsxDEV(BottomNavigationAction, {\n        label: \"\\u30DB\\u30FC\\u30E0\",\n        value: \"/\",\n        icon: /*#__PURE__*/_jsxDEV(Home, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 19\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(BottomNavigationAction, {\n        label: \"\\u6295\\u7A3F\",\n        value: \"/post\",\n        icon: /*#__PURE__*/_jsxDEV(Add, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 19\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(BottomNavigationAction, {\n        label: \"\\u901A\\u77E5\",\n        value: \"/notifications\",\n        icon: /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            position: 'relative'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Notifications, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 17\n          }, this), unreadCount > 0 && /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              position: 'absolute',\n              top: -8,\n              right: -8,\n              backgroundColor: 'error.main',\n              color: 'white',\n              borderRadius: '50%',\n              width: 20,\n              height: 20,\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              fontSize: '0.75rem'\n            },\n            children: unreadCount > 99 ? '99+' : unreadCount\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(BottomNavigationAction, {\n        label: \"\\u30DE\\u30C3\\u30D7\",\n        value: \"/map\",\n        icon: /*#__PURE__*/_jsxDEV(Map, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 19\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(BottomNavigationAction, {\n        label: \"\\u30D7\\u30ED\\u30D5\\u30A3\\u30FC\\u30EB\",\n        value: \"/profile\",\n        icon: /*#__PURE__*/_jsxDEV(Person, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 19\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n};\n_s(Layout, \"Q4Mossv3eOarpkHSUWD4YuaLlR8=\", false, function () {\n  return [useNavigate, useLocation, useSelector, useSelector];\n});\n_c = Layout;\nexport default Layout;\nvar _c;\n$RefreshReg$(_c, \"Layout\");","map":{"version":3,"names":["React","useSelector","Box","AppBar","Toolbar","Typography","BottomNavigation","BottomNavigationAction","Home","Add","Notifications","Person","Map","useNavigate","useLocation","jsxDEV","_jsxDEV","Layout","children","_s","navigate","location","isAuthenticated","state","auth","unreadCount","notifications","authRequiredPages","isAuthRequired","includes","pathname","noAuthPages","isNoAuthPage","some","page","startsWith","useEffect","handleNavigation","event","newValue","sx","display","flexDirection","minHeight","position","variant","component","flexGrow","fileName","_jsxFileName","lineNumber","columnNumber","pb","value","onChange","bottom","left","right","zIndex","label","icon","top","backgroundColor","color","borderRadius","width","height","alignItems","justifyContent","fontSize","_c","$RefreshReg$"],"sources":["C:/Users/PCUSER/VScode-project/CHAP/web/src/components/Layout.tsx"],"sourcesContent":["import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { Box, AppBar, Toolbar, Typography, BottomNavigation, BottomNavigationAction } from '@mui/material';\r\nimport { Home, Add, Notifications, Person, Map } from '@mui/icons-material';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport { RootState } from '../store';\r\n\r\ninterface LayoutProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\nconst Layout: React.FC<LayoutProps> = ({ children }) => {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const { isAuthenticated } = useSelector((state: RootState) => state.auth);\r\n  const { unreadCount } = useSelector((state: RootState) => state.notifications);\r\n\r\n  // 認証が必要なページのリスト\r\n  const authRequiredPages = ['/', '/post', '/notifications', '/profile', '/chat', '/create-room', '/settings', '/map'];\r\n  const isAuthRequired = authRequiredPages.includes(location.pathname);\r\n\r\n  // ログインページや管理者ページは認証チェックをスキップ\r\n  const noAuthPages = ['/login', '/onboarding', '/admin'];\r\n  const isNoAuthPage = noAuthPages.some(page => location.pathname.startsWith(page));\r\n\r\n  // 認証が必要なページで未認証の場合はログインページにリダイレクト\r\n  if (isAuthRequired && !isAuthenticated && !isNoAuthPage) {\r\n    React.useEffect(() => {\r\n      navigate('/login');\r\n    }, [navigate]);\r\n    return null;\r\n  }\r\n\r\n  const handleNavigation = (event: React.SyntheticEvent, newValue: string) => {\r\n    navigate(newValue);\r\n  };\r\n\r\n  return (\r\n    <Box sx={{ display: 'flex', flexDirection: 'column', minHeight: '100vh' }}>\r\n      <AppBar position=\"static\">\r\n        <Toolbar>\r\n          <Typography variant=\"h6\" component=\"div\" sx={{ flexGrow: 1 }}>\r\n            CHAP\r\n          </Typography>\r\n        </Toolbar>\r\n      </AppBar>\r\n\r\n      <Box component=\"main\" sx={{ flexGrow: 1, pb: 7 }}>\r\n        {children}\r\n      </Box>\r\n\r\n      {isAuthenticated && (\r\n        <BottomNavigation\r\n          value={location.pathname}\r\n          onChange={handleNavigation}\r\n          sx={{ position: 'fixed', bottom: 0, left: 0, right: 0, zIndex: 1000 }}\r\n        >\r\n          <BottomNavigationAction\r\n            label=\"ホーム\"\r\n            value=\"/\"\r\n            icon={<Home />}\r\n          />\r\n          <BottomNavigationAction\r\n            label=\"投稿\"\r\n            value=\"/post\"\r\n            icon={<Add />}\r\n          />\r\n          <BottomNavigationAction\r\n            label=\"通知\"\r\n            value=\"/notifications\"\r\n            icon={\r\n              <Box sx={{ position: 'relative' }}>\r\n                <Notifications />\r\n                {unreadCount > 0 && (\r\n                  <Box\r\n                    sx={{\r\n                      position: 'absolute',\r\n                      top: -8,\r\n                      right: -8,\r\n                      backgroundColor: 'error.main',\r\n                      color: 'white',\r\n                      borderRadius: '50%',\r\n                      width: 20,\r\n                      height: 20,\r\n                      display: 'flex',\r\n                      alignItems: 'center',\r\n                      justifyContent: 'center',\r\n                      fontSize: '0.75rem',\r\n                    }}\r\n                  >\r\n                    {unreadCount > 99 ? '99+' : unreadCount}\r\n                  </Box>\r\n                )}\r\n              </Box>\r\n            }\r\n          />\r\n          <BottomNavigationAction\r\n            label=\"マップ\"\r\n            value=\"/map\"\r\n            icon={<Map />}\r\n          />\r\n          <BottomNavigationAction\r\n            label=\"プロフィール\"\r\n            value=\"/profile\"\r\n            icon={<Person />}\r\n          />\r\n        </BottomNavigation>\r\n      )}\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default Layout; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}